# Riva Ash Glossary (Domain Dictionary)

A concise dictionary of core terms used across the Riva Ash application. This reflects the actual Ash resources and domain concepts in the codebase. Use it to align naming in code, docs, and UI.

## People and Accounts
- User: Authenticated account that signs in to the system; can own businesses and has a role (user, admin, superadmin).
- Client: The end customer who makes reservations/bookings. May be registered or unregistered; identified by name, email, phone.
- Employee: A staff member of a business. May be assigned to reservations and have permissions.

## Authorization & Security
- Permission: A capability that guards access to actions or data (e.g., manage_reservations).
- EmployeePermission: A mapping that grants a specific permission to an employee.
- Token: Authentication token for users (managed via AshAuthentication).

## Business Structure
- Business: Top-level entity representing a company/venue/merchant. Owns plots, sections, items, employees, clients, and reservations.
- Plot: A large area or site within a business (e.g., a campground plot group or facility area).
- Section: A subdivision within a plot or business used to group items (e.g., Section A, Lakeside).
- ItemType: Classification of items (e.g., Cabin, Tent Site, Kayak). Helps pricing, availability, and filtering.
- Item: A concrete resource that can be reserved (e.g., a specific cabin or site). Belongs to a section and item type.
- Layout: A saved arrangement or plan describing how items are positioned within a section/plot.
- ItemPosition: The coordinates or placement of a specific item within a layout.

## Booking and Scheduling
- Reservation (aka Booking): A time-bounded booking of an Item by a Client (optionally assigned to an Employee). Tracks status, dates, notes, and pricing totals.
- Reservation Status: Lifecycle state of a reservation: pending, provisional, confirmed, cancelled, completed.
- Reserved From/Until: The start and end timestamps for a reservationâ€™s booked window.
- Hold / ItemHold: A temporary hold on an item to prevent double-booking; may have an expiration (hold_expires_at).
- ItemSchedule: Availability or operational schedule associated with an item (e.g., hours/days open).
- AvailabilityException: A temporary override to normal availability (e.g., maintenance blackout, holiday).
- RecurringReservation: A reservation pattern that recurs over time according to a defined cadence.
- RecurringReservationInstance: A concrete occurrence generated from a RecurringReservation pattern.

## Pricing & Payments
- Pricing: Rules, rates, or price lists used to compute reservation cost (e.g., daily_rate, discounts).
- Total Amount: The computed price for a reservation, possibly derived from daily_rate, number_of_days, and discounts.
- Multi-day Discount: A percentage discount applied for multi-day reservations.
- Payment: A record of funds received or processed for reservations.
- Is Paid: Boolean flag indicating whether a reservation has been fully settled.

## Communication
- ChatRoom: A conversation channel for participants related to a business or reservation context.
- ChatMessage: An individual message within a chat room.
- ChatParticipant: A participant (user, client, or employee) associated with a chat room.

## Compliance & Data Lifecycle
- ConsentRecord (GDPR): Records client/user consent for data processing to support GDPR compliance.
- Archival (Soft Delete): A resource-level feature that marks records as archived_at instead of hard-deleting.
- PaperTrail Version: Audit/versioning records that track changes over time for selected resources.

## API and Integration
- Domain: The central Ash Domain module that enumerates all resources and configures extensions (JSON:API, GraphQL, Admin, PaperTrail).
- Resource: An Ash Resource module that defines schema, actions, relationships, policies, validations, and API exposure.
- JSON:API: REST-style interface generated by AshJsonApi exposing resource routes under /api.
- GraphQL: GraphQL types, queries, and mutations generated via AshGraphql.
- Admin (AshAdmin): Auto-generated admin UI for managing resources.

## Common Attributes and Concepts
- Business ID (denormalized): Stored on resources like Reservation for query performance and cross-resource validation.
- Notes: Free-form text attached to a reservation for context.
- Number of Days: Derived or stored length of a reservation in days.
- Daily Rate: Price per day used to compute totals.
- Provisional Flag: Indicates a reservation is temporary/holding pending confirmation.
- Owner: The User who owns a Business (owner_id).
- Public Searchable: Whether a Business is discoverable via public search endpoints.
- Timestamps: inserted_at and updated_at are automatically managed fields across resources.

## Synonyms and Naming
- Booking = Reservation.
- Customer = Client (preferred term: Client).
- Staff = Employee.
- Area/Site = Plot/Section depending on granularity.
- Asset/Unit = Item.

## Relationships (high level)
- Business has many: Plots, Sections, Items, Employees, Clients, Reservations, Layouts.
- Section contains many Items; Items belong to an ItemType.
- Client makes many Reservations; Item has many Reservations.
- Employee may be assigned to Reservations and has EmployeePermissions.
- RecurringReservation produces many RecurringReservationInstances.

## Status and Lifecycle Notes
- Pending: Created but awaiting review or payment.
- Provisional: Temporarily held; may auto-expire if not confirmed.
- Confirmed: Approved booking; inventory committed.
- Cancelled: Booking voided by client or business.
- Completed: Past bookings that have been fulfilled.

---
Maintenance: Keep this glossary aligned with the resources declared in `RivaAsh.Domain` and update when adding or renaming resources/attributes.
